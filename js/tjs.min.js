!function(e){e.fn.t=function(t,a){return this.each(function(){var n,r=a,s=t,p=e(this),d=!1,l="​",o="12qwertyuiop[]asdfghjkl;zxcvbnm,./~!@#$%^&*()_+:1234567890-=op".split([]),c=function(t,a){return e.type(t)[0]==(a||"n")},u=function(){return g=e.grep(m,function(e){return"&"==e[0]||!e[1]}).length-1,g>-1?g:0};if(""===s&&(s="<del>*</del>"),p.data("is_typing"))return"pause"==s&&p.data("pause",c(r,"b")?r:!p.data("pause")),this;if("pause"==s)return this;if(p.data("is_typing",1),c(s,"o")&&(r=s),/t\-/.test(p.attr("class")))return this;if("add"==s&&e(".t-container",p)[0]){var f=r,r=e.extend(p.data()),y=p=e(":first",p);f="<"+r.tag+' class="typing-add">'+f+"</"+r.tag+">"}else{"add"==s&&(s=r,r={});var h,m,v,w,b,r=e.extend({t:!0,delay:!1,speed:75,speed_vary:!1,caret:"▎",tag:"span",blink:!1,repeat:-3,wrap:!1,mistype:!1,locale:"en",init:e.noop,typing:e.noop,fin:e.noop},r),_=!1,f=!1;e(".t-container",p)[0]||(p.wrapInner(e("<"+r.tag+"/>",{class:"t-container",style:"top:auto;bottom:auto;"})),p.css("position").match(/^[ar]/)||p.css({position:"relative"}),p.css({overflow:"hidden"})),r.wrap&&!p.parent().data("t-wrap")&&(p.wrap(e("<div/>",r.wrap[0].match(/[.#]/)?"#"==r.wrap[0]?{id:r.wrap.substr(1)}:{class:r.wrap.substr(1)}:{style:r.wrap})),p.parent().data("t-wrap",1)),c(r.caret,"s")&&!e(".t-caret",p)[0]&&(c(r.blink)&&r.blink<10&&(r.blink=10),_=e("<"+r.tag+"/>",{class:"t-caret",html:r.caret}).appendTo(p),r.blink&&p.append(l)&&(w=setInterval(function(){_.toggle()},c(r.blink)?r.blink:r.speed*(r.speed_vary?4:5)))),r.blink||clearInterval(w),r.speed=!c(r.speed)||r.speed<10?10:r.speed,r.speed_vary&&(r.speed/=2.5),r.mistype>1||(r.mistype=!1),p.data(r),e(".typing-0",p).replaceWith(function(){return this.childNodes}),e(".typing-add",p).remove(),y=p=e(":first",p),""==(m=c(s,"s")?s:p.html())&&(m=l),p.empty(),y.parent().show().css({visibility:"visible"}),c(r.delay)&&r.delay>0&&(h=~~(1e3*r.delay/r.speed))}m=String(f||m).replace(/(.*?)[\u200b]+$/,"$1").replace(/<\!\-\-([\s\S]+?)\-\->/g,"$1").replace(/<ins><\/ins>/g,"").replace(/<(img|br|input|hr)(.*?)[\/]?>/g,"<#$1$2/>").replace(/<ins>\s*(\d+[.]?\d{0,})\s*<\/ins>/g,'<ins data-ins="$1"></ins>').replace(/<ins>([\s\S]+?)<\/ins>/g,function(e,t){return"<#ins>"+t.replace(/<[^#]/g,"<#")+"</ins>"}).replace(/<(del.*?data-del=")(.*?)(".*?)><\/(del>)/g,"<#$1$2$3><#/$4$2<#/$4").replace(/<del(.*?)>([\s\S]*?)<\/del>/g,function(e,t,a,n){return i=a.match(/data-ins=\"(.*?)\"/),i=i&&i[1]?i[1]:.25,a=a.replace(/<[\/]?.*?>/g,""),"<del"+t+' data-del="'+a.replace(/\n/,"\\n")+'" data-ins="'+i+'">'+("*"!=a?a:"")+"</del>"}).replace(/<(\w+)(.*?)>/g,"<$1$2></$1>").replace(/<#/g,"<").match(/<ins>[\s\S]+?<\/ins>|<[^<]+\/>|<\/\w+>|<[\s\S]+?><\/\w+>|&[#x]?[a-z0-9]+;|\r|\n|\t|\S|\s/gi),!c(h)&&(h=m.shift()),m.push(l),"de"==r.locale&&(o='12qwertzuiopü+asdfghjklöä#<yxcvbnm,.-!"§$%&/(()=?1234567890ß*p+'),v=u(),!f&&r.init(y.parent()),b=setInterval(function(){if(!y.parent().data("pause")&&!d){if(d=!d,c(h)){if(--h)return void(d=!d);h=p.data().ins?"//":m.shift()}else if(r.speed_vary&&~~(4*Math.random()))return void(d=!d);if(p.data().del&&(n=String(p.data().del),!c(h,"a")&&"/"==h[1]&&(h=n.replace(/\\n/g,"\n").split([])),c(h,"a"))){if(h.pop())return p.text(h.join([])),void(d=!d);"*"==n&&(y.wrapInner(e("<"+r.tag+"/>",{class:"typing-0",style:"display:none;"})),p=p.parent(),f&&(m=e.merge(["<"+r.tag+' class="typing-add"></'+r.tag+">"],m,["</"+r.tag+">"]),p=p.parent())),p=p.parent(),n==l&&p.find(":last").remove(),h=""}for(;"/"==h[1];)p=p.parent(),h=m.shift()||"";if(p.append(h),r.typing(y.parent(),u(),v,h),!h.match(/<ins>/)&&h.match(/></)&&(p=p.find(":last")),!(h=m.shift()))return clearInterval(b),y.parent().removeData(["is_typing","pause"]),c(r.repeat)&&--r.repeat,r.repeat>-1?(r.init=e.noop,void y.parent().t(c(s,"o")?r:s,r)):void r.fin(y.parent());r.mistype&&h&&!h[1]&&p.data().del!=l&&" "!=h&&!~~(Math.random()*r.mistype)&&(__=e.inArray(h.toLowerCase(),o,2))>-1&&(__+=1+~~(2*Math.random()),~~(2*Math.random())&&(__-=3),m=e.merge([h.charCodeAt(0)<90?o[__].toUpperCase():o[__],"</del>",h],m),h='<del data-ins="0.25" data-del="​"></del>'),h&&"/"==h[1]&&p.data().ins&&(h=~~(1e3*Number(p.data().ins)/r.speed)),d=!d}},r.speed)})}}(jQuery);